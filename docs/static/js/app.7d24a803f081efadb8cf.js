webpackJsonp([1],{135:function(t,e){},213:function(t,e,n){function s(t){n(301)}var i=n(26)(n(564),n(290),s,null,null);t.exports=i.exports},214:function(t,e,n){function s(t){n(304)}var i=n(26)(n(567),n(293),s,"data-v-7f7dd8e3",null);t.exports=i.exports},215:function(t,e){},217:function(t,e,n){"use strict";var s=n(12),i=n(337),r=n(286),a=n.n(r),o=n(287),l=n.n(o),c=n(285),u=n.n(c),d=n(284),p=n.n(d);s.default.use(i.a),e.a=new i.a({routes:[{path:"/",name:"Login",component:a.a},{path:"/post",name:"Post",component:l.a},{path:"/editor",name:"Editor",component:u.a},{path:"/article",name:"Article",component:p.a}]})},218:function(t,e,n){"use strict";var s=n(12),i=n(120);s.default.use(i.a),e.a=new i.a.Store({state:{activeUser:null},mutations:{getActiveUser:function(t,e){t.activeUser=e}}})},284:function(t,e,n){function s(t){n(303)}var i=n(26)(n(565),n(292),s,null,null);t.exports=i.exports},285:function(t,e,n){function s(t){n(305)}var i=n(26)(n(566),n(294),s,null,null);t.exports=i.exports},286:function(t,e,n){function s(t){n(302)}var i=n(26)(n(568),n(291),s,"data-v-4f723383",null);t.exports=i.exports},287:function(t,e,n){function s(t){n(306)}var i=n(26)(n(569),n(295),s,"data-v-b2ec7614",null);t.exports=i.exports},288:function(t,e,n){var s=n(26)(n(563),n(289),null,null,null);t.exports=s.exports},289:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"avatar",style:t.style},[this.src?t._e():n("span",[t._v(t._s(t.userInitial))])])])},staticRenderFns:[]}},290:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},291:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"content"},[n("el-col",{attrs:{xs:24,sm:{span:6,offset:9}}},[n("span",{staticClass:"title"},[t._v("\n            欢迎登陆\n        ")]),t._v(" "),n("el-row",[n("el-input",{attrs:{placeholder:"用户名",type:"text"},model:{value:t.signIn.username,callback:function(e){t.signIn.username=e},expression:"signIn.username"}}),t._v(" "),n("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:t.signIn.password,callback:function(e){t.signIn.password=e},expression:"signIn.password"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSignIn}},[t._v("登陆")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("注册")]),t._v(" "),n("el-dialog",{attrs:{title:"注册",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{model:t.signUp}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{type:"text"},model:{value:t.signUp.username,callback:function(e){t.signUp.username=e},expression:"signUp.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-input",{attrs:{type:"text"},model:{value:t.signUp.email,callback:function(e){t.signUp.email=e},expression:"signUp.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.signUp.password,callback:function(e){t.signUp.password=e},expression:"signUp.password"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSignUp}},[t._v("确 定")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},292:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("blog-header"),t._v(" "),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",slot:"header"},[n("span",{staticClass:"title"},[t._v("\n                "+t._s(t.title)+"\n            ")]),t._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{size:"large",icon:"edit"},slot:"append"})],1),t._v(" "),n("div",{staticClass:"text item"},[n("div",{attrs:{id:"editor"}})])])],1)},staticRenderFns:[]}},293:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("el-row",{staticClass:"continer",attrs:{type:"flex",align:"middle",gutter:70}},[n("el-col",{attrs:{xs:5,sm:3,md:2,lg:1}},[n("avatar",{staticClass:"imgAvatar",attrs:{username:t.username}})],1),t._v(" "),n("el-col",[n("h2",[t._v(t._s(t.username)+"'s Blog")])]),t._v(" "),n("router-link",{attrs:{to:"/"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"回到首页",placement:"bottom-start"}},[n("el-button",{staticClass:"headerBtn",staticStyle:{float:"right"},attrs:{type:"text",icon:"caret-left"}})],1)],1),t._v(" "),n("router-link",{attrs:{to:"/editor"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"写新文章",placement:"bottom-start"}},[n("el-button",{staticClass:"headerBtn",staticStyle:{float:"right"},attrs:{type:"text",icon:"edit"}})],1)],1),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"注销",placement:"bottom-start"}},[n("el-button",{staticClass:"headerBtn",attrs:{type:"text",size:"large",icon:"close"},on:{click:t.handleLogout}})],1)],1)],1)},staticRenderFns:[]}},294:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("blog-header"),t._v(" "),n("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[n("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"分类"},slot:"prepend",model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.types,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),n("el-button",{attrs:{size:"large",icon:"upload"},on:{click:t.handleCommitCtx},slot:"append"})],1),t._v(" "),n("div",{attrs:{id:"editor"}})],1)},staticRenderFns:[]}},295:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"continer"},[n("blog-header"),t._v(" "),n("el-col",{staticClass:"menu-vertical",attrs:{xs:7,sm:4,md:4,lg:3}},[n("el-menu",{attrs:{"default-active":"-1"}},[n("el-menu-item",{attrs:{index:"-1"},on:{click:function(e){t.handleUserChange(t.$store.state.activeUser._id)}}},[t._v("自己")]),t._v(" "),t._l(t.userList,function(e,s){return n("el-menu-item",{key:e._id,attrs:{index:""+s},on:{click:function(n){t.handleUserChange(e._id)}}},[t._v(t._s(e.username))])})],2)],1),t._v(" "),n("el-col",{staticClass:"content",attrs:{xs:17,sm:20,md:20,lg:21}},[0===t.postList.length?n("h2",[t._v("哎啊,还没写文章呢!")]):n("el-tabs",t._l(t.subjectList,function(e,s){return n("el-tab-pane",{key:s,attrs:{name:""+s,label:e}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.postList.filter(function(t){return t.type===e}),stripe:"","show-header":!1,"row-key":t.postList.id},on:{"current-change":t.handleCurrentChange}},[n("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-icon",{attrs:{name:"time"}}),t._v(" "),n("span",{staticClass:"listTime"},[t._v(t._s(e.row.time))]),t._v(" "),n("span",{staticClass:"listTitle"},[t._v(t._s(e.row.title))])]}}])})],1)],1)}))],1)],1)},staticRenderFns:[]}},299:function(t,e){},300:function(t,e){},301:function(t,e){},302:function(t,e){},303:function(t,e){},304:function(t,e){},305:function(t,e){},306:function(t,e){},351:function(t,e){t.exports={name:"kinvey-html5-sdk",version:"3.8.1",description:"Kinvey JavaScript SDK for HTML5 applications.",homepage:"http://www.kinvey.com",bugs:{url:"https://github.com/Kinvey/html5-sdk/issues"},license:"Apache-2.0",author:"Kinvey",contributors:["Thomas Conner <thomas@kinvey.com>"],main:"./dist/index.js",repository:{type:"git",url:"git@github.com:Kinvey/html5-sdk"},scripts:{build:"npm run clean && npm run transpile && npm run bundle && npm run minify",bundle:"webpack --config webpack.config.js",clean:"rm -rf dist && rm -rf coverage && rm -rf s3",minify:"uglifyjs --screw-ie8 --compress warnings=false --mangle --comments --output ./dist/kinvey-html5-sdk.min.js -- ./dist/kinvey-html5-sdk.js ",cover:"istanbul cover _mocha -- --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit",docs:"esdoc -c esdoc.json","e2e:server":"selenium-standalone install --version=3.0.1 && selenium-standalone start","e2e:app":"npm run build && shjs ./scripts/e2e.js && node ./test/e2e/app","e2e:test":"wdio ./test/e2e/wdio.conf","e2e:test:browserstack":"wdio ./test/e2e/browserstack.conf",lint:"npm run lint:src","lint:src":"eslint src/**","lint:test":"eslint test/unit/**",preversion:"rm -rf node_modules && npm install && npm test",version:"npm run build && git add dist/kinvey-html5-sdk.js && git add dist/kinvey-html5-sdk.min.js && git commit -m 'Update dist bundle.'",postversion:"git push && git push --tags && rm -rf dist && rm -rf coverage && rm -rf s3",s3:"npm run build && shjs ./scripts/s3.js",test:"mocha --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit","test:watch":"mocha -w --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit",transpile:"babel src --out-dir dist"},dependencies:{"core-js":"2.4.1","es6-promise":"4.1.0","kinvey-js-sdk":"3.8.1","local-storage-fallback":"4.0.0",lodash:"4.17.4",url:"0.11.0",xhr:"2.3.3"},peerDependencies:{"kinvey-js-sdk":"3.8.1"},devDependencies:{"babel-cli":"6.24.0","babel-core":"6.24.0","babel-eslint":"7.1.1","babel-plugin-inline-dotenv":"^1.1.1","babel-plugin-module-resolver":"2.5.0","babel-polyfill":"^6.9.0","babel-preset-es2015":"6.24.0","babel-preset-stage-2":"^6.0.15","babel-register":"6.24.0","browserstack-local":"^1.2.0",eslint:"3.17.1","eslint-config-airbnb-base":"11.1.1","eslint-import-resolver-babel-module":"3.0.0","eslint-plugin-import":"2.2.0",expect:"^1.20.2","fs-extra":"2.1.1",istanbul:"1.1.0-alpha.1","json-loader":"^0.5.4",mocha:"3.2.0",nock:"9.0.9","regenerator-runtime":"0.10.3","selenium-standalone":"6.0.1",shelljs:"0.7.7","uglify-js":"2.8.12","wdio-mocha-framework":"0.5.9","wdio-spec-reporter":"0.1.0",webdriverio:"^4.4.0",webpack:"^1.13.0"},engines:{node:">=4.0"},keywords:["Kinvey","JavaScript","HTML5"],_from:"kinvey-html5-sdk@3.8.1",_resolved:"http://registry.npm.taobao.org/kinvey-html5-sdk/download/kinvey-html5-sdk-3.8.1.tgz"}},562:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(12),i=n(120),r=n(213),a=n.n(r),o=n(217),l=n(212),c=n.n(l),u=n(215),d=(n.n(u),n(216)),p=n.n(d),f=n(218),h=n(214),m=n.n(h);p.a.init({appKey:"kid_BJVrF0RKW",appSecret:"4cac002c973f44278b1c42787f3c8893"}),s.default.prototype.$kinvey=p.a,s.default.config.productionTip=!1,s.default.use(i.a),s.default.use(c.a),s.default.component("BlogHeader",m.a),new s.default({el:"#app",store:f.a,router:o.a,template:"<App/>",components:{App:a.a}})},563:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(558),i=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={props:{username:{type:String,required:!0},initials:{type:String},backgroundColor:{type:String},color:{type:String},size:{type:Number,default:50},src:{type:String},rounded:{type:Boolean,default:!0},lighten:{type:Number,default:80}},data:function(){return{backgroundColors:["#F44336","#FF4081","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"]}},mounted:function(){this.$emit("avatar-initials",this.username,this.userInitial)},computed:{background:function(){return this.backgroundColor||this.randomBackgroundColor(this.username.length,this.backgroundColors)},fontColor:function(){return this.color||this.lightenColor(this.background,this.lighten)},isImage:function(){return void 0!==this.src},style:function(){var t={width:this.size+"px",height:this.size+"px",borderRadius:this.rounded?"50%":0,textAlign:"center",verticalAlign:"middle"},e={background:"url("+this.src+") no-repeat",backgroundSize:this.size+"px "+this.size+"px",backgroundOrigin:"content-box"},n={backgroundColor:this.background,font:Math.floor(this.size/2.5)+"px/100px Helvetica, Arial, sans-serif",fontWeight:"bold",color:this.fontColor,lineHeight:this.size+Math.floor(this.size/20)+"px"},s=this.isImage?e:n;return(0,i.default)(t,s),t},userInitial:function(){return this.initials||this.initial(this.username)}},methods:{initial:function(t){for(var e=t.split(/[ -]/),n="",s=0;s<e.length;s++)n+=e[s].charAt(0);return n.length>3&&-1!==n.search(/[A-Z]/)&&(n=n.replace(/[a-z]+/g,"")),n=n.substr(0,3).toUpperCase()},randomBackgroundColor:function(t,e){return e[t%e.length]},lightenColor:function(t,e){var n=!1;"#"===t[0]&&(t=t.slice(1),n=!0);var s=parseInt(t,16),i=(s>>16)+e;i>255?i=255:i<0&&(i=0);var r=(s>>8&255)+e;r>255?r=255:r<0&&(r=0);var a=(255&s)+e;return a>255?a=255:a<0&&(a=0),(n?"#":"")+(a|r<<8|i<<16).toString(16)}}}},564:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",beforeCreate:function(){this.$kinvey.User.getActiveUser()&&this.$store.state.activeUser||this.$router.replace("/")}}},565:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(125),i=n.n(s),r=n(135),a=(n.n(r),n(299));n.n(a);e.default={data:function(){return{title:"",ctx:{},quill:{},type:"",ctxId:""}},methods:{},mounted:function(){var t=this,e=this.$kinvey.DataStore.collection("articles",this.$kinvey.DataStoreType.Network);this.ctxId=this.$route.query.id,this.quill=new i.a("#editor",{readOnly:!0,theme:"bubble"}),e.findById(this.ctxId).subscribe(function(e){e?(console.log(e),t.title=e.title,t.ctx=e.content,t.type=e.type,t.quill.setContents(t.ctx)):console.log("can not find article")},function(t){console.log(t)})}}},566:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(125),i=n.n(s),r=n(135),a=(n.n(r),n(300));n.n(a);e.default={data:function(){return{title:"",ctx:{},quill:{},types:[{value:"情感",label:"情感"},{value:"生活",label:"生活"},{value:"运动",label:"运动"}],type:""}},methods:{update:function(){this.ctx=this.quill.getContents()},handleCommitCtx:function(){var t=this,e=this.$kinvey.DataStore.collection("articles"),n={title:this.title,type:this.type,content:this.ctx};e.save(n).then(function(e){t.$router.push({path:"article",query:{id:e._id}})}).catch(function(t){console.log(t)})}},mounted:function(){var t=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]];this.quill=new i.a("#editor",{modules:{toolbar:t},theme:"snow"}),this.quill.on("text-change",this.update)}}},567:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(288),i=n.n(s);e.default={name:"header",components:{avatar:i.a},methods:{handleLogout:function(){var t=this;this.$kinvey.User.logout().then(function(){t.$store.commit("getActiveUser",null),t.$router.replace("/")})}},data:function(){return{username:""}},mounted:function(){this.username=this.$store.state.activeUser.username}}},568:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Login",data:function(){return{signUp:{username:"",password:"",email:""},signIn:{username:"",password:""},dialogVisible:!1}},methods:{alertError:function(t){switch(t){case 409:this.$alert("该用户已经存在","错误"+t);break;case 401:this.$alert("用户名或密码出错啦!","错误"+t);break;default:this.$alert("未知错误","错误"+t)}},handleSignIn:function(){var t=this;this.$kinvey.User.login({username:this.signIn.username,password:this.signIn.password}).then(function(e){t.$store.commit("getActiveUser",e),t.$router.replace("/post")}).catch(function(e){console.log(e),t.alertError(e.code)})},handleSignUp:function(){var t=this;(new this.$kinvey.User).signup({username:this.signUp.username,password:this.signUp.password,email:this.signUp.email,first_name:"public"}).then(function(e){t.$store.commit("getActiveUser",e),t.dialogVisible=!1,t.$alert("赶快登录写下你的文章吧","恭喜你,注册成功!",{callback:function(){t.$router.replace("/post")}})}).catch(function(e){console.log(e),t.alertError(e.code)})}},mounted:function(){var t=this.$kinvey.User.getActiveUser();null!==t&&(this.$store.commit("getActiveUser",t),this.$router.replace("/post"))}}},569:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(559),i=n.n(s);e.default={name:"Post",data:function(){return{userId:"",userList:[],subjectList:[],postList:[]}},methods:{listArticle:function(){var t=this,e=this.userId,n=new this.$kinvey.Query;n.equalTo("_acl.creator",e),n.fields=["_id","title","type"],this.$kinvey.DataStore.collection("articles").find(n).subscribe(function(e){var n=[],s=!0,r=!1,a=void 0;try{for(var o,l=i()(e);!(s=(o=l.next()).done);s=!0){var c=o.value;c.type=""===c.type?c.type="未分类":c.type,-1===n.indexOf(c.type)&&n.push(c.type)}}catch(t){r=!0,a=t}finally{try{!s&&l.return&&l.return()}finally{if(r)throw a}}t.subjectList=n,t.postList=e},function(t){console.log(t)})},listUser:function(){var t=this,e=new this.$kinvey.Query;e.equalTo("first_name","public"),this.$kinvey.User.lookup(e).subscribe(function(e){t.userList=e.filter(function(e){return e._id!==t.$store.state.activeUser._id})},function(t){console.log(t)})},handleCurrentChange:function(t){this.$router.push({path:"article",query:{id:t._id}})},handleUserChange:function(t){this.userId=t,this.listArticle()}},mounted:function(){this.$store.state.activeUser&&(this.userId=this.$store.state.activeUser._id),this.listUser(),this.listArticle()}}},570:function(t,e){}},[562]);
//# sourceMappingURL=app.7d24a803f081efadb8cf.js.map