webpackJsonp([1],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app",beforeCreate:function(){var e=this;this.$kinvey.User.getActiveUser()&&this.$store.state.activeUser||(console.log("no login"),this.$kinvey.User.login({username:"guest",password:"guest"}).then(function(t){console.log("login!"),e.$store.commit("getActiveUser",t),window.location.reload()}))}}},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(67),s=n.n(i),a=n(66),l=(n.n(a),n(161));n.n(l);t.default={data:function(){return{title:"",ctx:{},quill:{},type:"",ctxId:"",loading:!0}},methods:{},mounted:function(){var e=this,t=this.$kinvey.DataStore.collection("articles",this.$kinvey.DataStoreType.Network);this.ctxId=this.$route.query.id,this.quill=new s.a("#editor",{readOnly:!0,theme:"bubble"}),t.findById(this.ctxId).subscribe(function(t){t?(e.title=t.title,e.ctx=t.content,e.type=t.type,e.quill.setContents(e.ctx),e.loading=!1):console.log("can not find article")},function(e){console.log(e)})}}},102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(67),s=n.n(i),a=n(66),l=(n.n(a),n(162));n.n(l);t.default={data:function(){return{title:"",ctx:{},quill:{},types:[{value:"情感",label:"情感"},{value:"生活",label:"生活"},{value:"运动",label:"运动"}],type:""}},methods:{update:function(){this.ctx=this.quill.getContents()},handleCommitCtx:function(){var e=this,t=this.$kinvey.DataStore.collection("articles"),n={title:this.title,type:this.type,content:this.ctx};t.save(n).then(function(t){e.$router.push({path:"article",query:{id:t._id}})}).catch(function(e){console.log(e)})}},mounted:function(){var e=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]];this.quill=new s.a("#editor",{modules:{toolbar:e},theme:"snow"}),this.quill.on("text-change",this.update)}}},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(174),s=n.n(i);t.default={name:"blog-header",components:{avatar:s.a},methods:{handleLogout:function(){var e=this;this.$kinvey.User.logout().then(function(){e.$store.commit("getActiveUser",null),e.$router.replace("/")})}},data:function(){return{username:"书香墨剑"}},mounted:function(){}}},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Login",data:function(){return{signUp:{username:"",password:"",email:""},signIn:{username:"",password:""},dialogVisible:!1}},methods:{alertError:function(e){switch(e){case 409:this.$alert("该用户已经存在","错误"+e);break;case 401:this.$alert("用户名或密码出错啦!","错误"+e);break;default:this.$alert("未知错误","错误"+e)}},handleSignIn:function(){var e=this;this.$kinvey.User.login({username:this.signIn.username,password:this.signIn.password}).then(function(t){e.$store.commit("getActiveUser",t),e.$router.replace("/editor")}).catch(function(t){console.log(t),e.alertError(t.code)})},handleSignUp:function(){var e=this;(new this.$kinvey.User).signup({username:this.signUp.username,password:this.signUp.password,email:this.signUp.email,first_name:"public"}).then(function(t){e.$store.commit("getActiveUser",t),e.dialogVisible=!1,e.$alert("赶快登录写下你的文章吧","恭喜你,注册成功!",{callback:function(){e.$router.replace("/post")}})}).catch(function(t){e.alertError(t.code)})}},mounted:function(){var e=this.$kinvey.User.getActiveUser();null!==e&&(this.$store.commit("getActiveUser",e),this.$router.replace("/post"))}}},105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(106),s=n.n(i);t.default={name:"Post",data:function(){return{userId:"",userList:[],subjectList:[],postList:[],subject:"all",fullscreenLoading:!0}},methods:{listArticle:function(){var e=this;this.$kinvey.DataStore.collection("articles").find().subscribe(function(t){var n=[],i=!0,a=!1,l=void 0;try{for(var o,r=s()(t);!(i=(o=r.next()).done);i=!0){var c=o.value;c.type=""===c.type?c.type="未分类":c.type,-1===n.indexOf(c.type)&&n.push(c.type)}}catch(e){a=!0,l=e}finally{try{!i&&r.return&&r.return()}finally{if(a)throw l}}e.subjectList=n,e.postList=t,e.postList.length>0&&(e.fullscreenLoading=!1)},function(e){console.log(e)})},handleCurrentChange:function(e){this.$router.push({path:"article",query:{id:e._id}})},handleSubjectChange:function(e){this.subject=e}},mounted:function(){this.listArticle()}}},161:function(e,t){},162:function(e,t){},163:function(e,t){},164:function(e,t){},165:function(e,t){},166:function(e,t){},167:function(e,t){},168:function(e,t){},175:function(e,t,n){function i(e){n(165)}var s=n(14)(n(101),n(181),i,null,null);e.exports=s.exports},176:function(e,t,n){function i(e){n(163)}var s=n(14)(n(102),n(179),i,null,null);e.exports=s.exports},177:function(e,t,n){function i(e){n(166)}var s=n(14)(n(104),n(182),i,"data-v-737ebe2c",null);e.exports=s.exports},178:function(e,t,n){function i(e){n(168)}var s=n(14)(n(105),n(184),i,null,null);e.exports=s.exports},179:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("blog-header"),e._v(" "),n("el-input",{staticClass:"title-input",attrs:{placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),n("el-select",{attrs:{slot:"prepend",filterable:"","allow-create":"",placeholder:"分类"},slot:"prepend",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.types,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-button",{attrs:{slot:"append",size:"large",icon:"upload"},on:{click:e.handleCommitCtx},slot:"append"}),e._v(" "),n("div",{attrs:{id:"editor"}})],1)},staticRenderFns:[]}},180:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("el-row",{staticClass:"continer",attrs:{type:"flex",align:"middle",gutter:70}},[n("el-col",{attrs:{xs:7,sm:5,md:4,lg:2}},[n("avatar",{staticClass:"imgAvatar",attrs:{username:e.username}})],1),e._v(" "),n("el-col",[n("h2",[e._v(e._s(e.username)+"'s Blog")])])],1)],1)},staticRenderFns:[]}},181:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"title"},[e._v("\n                "+e._s(e.title)+"\n            ")])]),e._v(" "),n("div",{staticClass:"text item"},[n("div",{attrs:{id:"editor"}})])])],1)},staticRenderFns:[]}},182:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"content"},[n("el-col",{attrs:{xs:24,sm:{span:6,offset:9}}},[n("span",{staticClass:"title"},[e._v("\n            欢迎登陆\n        ")]),e._v(" "),n("el-row",[n("el-input",{attrs:{placeholder:"用户名",type:"text"},model:{value:e.signIn.username,callback:function(t){e.$set(e.signIn,"username",t)},expression:"signIn.username"}}),e._v(" "),n("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:e.signIn.password,callback:function(t){e.$set(e.signIn,"password",t)},expression:"signIn.password"}}),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSignIn}},[e._v("登陆")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("注册")]),e._v(" "),n("el-dialog",{attrs:{title:"注册",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.signUp}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{type:"text"},model:{value:e.signUp.username,callback:function(t){e.$set(e.signUp,"username",t)},expression:"signUp.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-input",{attrs:{type:"text"},model:{value:e.signUp.email,callback:function(t){e.$set(e.signUp,"email",t)},expression:"signUp.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:e.signUp.password,callback:function(t){e.$set(e.signUp,"password",t)},expression:"signUp.password"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSignUp}},[e._v("确 定")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},183:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},184:function(e,t){e.exports={render:function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("el-row",{staticClass:"continer"},[i("blog-header"),t._v(" "),i("el-col",{staticClass:"menu-vertical",attrs:{xs:7,sm:4,md:4,lg:3}},[i("el-menu",{attrs:{"default-active":"-1"}},[i("el-menu-item",{attrs:{index:"-1"},on:{click:function(e){t.handleSubjectChange("all")}}},[t._v("全部")]),t._v(" "),t._l(t.subjectList,function(e,n){return i("el-menu-item",{key:n,attrs:{index:""+n},on:{click:function(n){t.handleSubjectChange(e)}}},[t._v(t._s(e))])})],2)],1),t._v(" "),i("el-col",{staticClass:"content",attrs:{xs:17,sm:20,md:20,lg:21}},[i("el-tabs",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}]},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.fullscreenLoading,expression:"fullscreenLoading"}],staticStyle:{width:"100%"},attrs:{data:t.postList.filter(function(n){return"all"===e.subject||n.type===t.subject}),stripe:"","show-header":!1,"row-key":t.postList.id},on:{"current-change":t.handleCurrentChange}},[i("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"listTime"},[t._v(t._s(e.row.time))]),t._v(" "),i("span",{staticClass:"listTitle"},[t._v(t._s(e.row.title))])]}}])})],1)],1)],1)],1)},staticRenderFns:[]}},66:function(e,t){},69:function(e,t,n){"use strict";var i=n(2),s=n(185),a=n(177),l=n.n(a),o=n(178),r=n.n(o),c=n(176),u=n.n(c),d=n(175),p=n.n(d);i.default.use(s.a),t.a=new s.a({routes:[{path:"/login",name:"Login",component:l.a},{path:"/",name:"Post",component:r.a},{path:"/editor",name:"Editor",component:u.a},{path:"/article",name:"Article",component:p.a}]})},70:function(e,t,n){"use strict";var i=n(2),s=n(45);i.default.use(s.a),t.a=new s.a.Store({state:{activeUser:null},mutations:{getActiveUser:function(e,t){e.activeUser=t}}})},72:function(e,t){},74:function(e,t,n){function i(e){n(167)}var s=n(14)(n(100),n(183),i,null,null);e.exports=s.exports},75:function(e,t,n){function i(e){n(164)}var s=n(14)(n(103),n(180),i,"data-v-3b05cf48",null);e.exports=s.exports},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),s=n(45),a=n(74),l=n.n(a),o=n(69),r=n(71),c=n.n(r),u=n(72),d=(n.n(u),n(73)),p=(n.n(d),n(70)),f=n(75),v=n.n(f);d.Kinvey.init({appKey:"kid_BJVrF0RKW",appSecret:"4cac002c973f44278b1c42787f3c8893"}),i.default.prototype.$kinvey=d.Kinvey,i.default.config.productionTip=!1,i.default.use(s.a),i.default.use(c.a),i.default.component("BlogHeader",v.a),new i.default({el:"#app",store:p.a,router:o.a,template:"<App/>",components:{App:l.a}})}},[99]);
//# sourceMappingURL=app.46d75746c0c0ddd4dedc.js.map